{"meta":{"title":"zey's blog","subtitle":null,"description":null,"author":"zey","url":"http://asiamcn.github.io"},"pages":[{"title":"","date":"2017-11-22T17:03:38.283Z","updated":"2017-11-22T17:03:38.283Z","comments":false,"path":"categories/index.html","permalink":"http://asiamcn.github.io/categories/index.html","excerpt":"","text":""},{"title":"","date":"2017-11-22T17:02:38.867Z","updated":"2017-11-22T17:02:38.867Z","comments":false,"path":"tags/index.html","permalink":"http://asiamcn.github.io/tags/index.html","excerpt":"","text":""}],"posts":[{"title":"Android视频实现CenterCrop","slug":"video-center-crop","date":"2017-11-22T15:10:53.000Z","updated":"2017-11-22T16:23:32.463Z","comments":true,"path":"2017/11/22/video-center-crop/","link":"","permalink":"http://asiamcn.github.io/2017/11/22/video-center-crop/","excerpt":"","text":"CenterCrop的核心是使用TextureView的setTransform)方法来实现对视频区域的变换。 思路来自于：github 因为产品需求的原因，在展示视频的时候需要使用类似ImageView的CenterCrop属性。对指定区域进行填充，对视频等比放大。 重写了TextureView，在其中使用MediaPlayer来播放视频。（上面库的ScalableVideoView 类里面） 我的实现是在重写TextureView的View的onMeasure方法里面进行如下计算，来实现centerCrop: 123456789101112int viewWidth = getDefaultSize(mVideoWidth, widthMeasureSpec);int viewHeight = getDefaultSize(mVideoHeight, heightMeasureSpec);setMeasuredDimension(viewWidth, viewHeight);float scaleX = viewWidth * 1.0f / mVideoWidth;float scaleY = viewHeight * 1.0f / mVideoHeight;float maxScale = Math.max(scaleX, scaleY);//中心位置int pivotPointX = viewWidth / 2;int pivotPointY = viewHeight / 2;//初始效果是填满View，相当于fitXY. 这里从fitXY变成centerCrop..mMatrix.setScale(maxScale / scaleX , maxScale / scaleY, pivotPointX, pivotPointY);setTransform(mMatrix);","categories":[],"tags":[{"name":"android","slug":"android","permalink":"http://asiamcn.github.io/tags/android/"}]},{"title":"Hello World","slug":"hello-world","date":"2017-11-20T16:01:51.159Z","updated":"2017-11-20T16:01:51.162Z","comments":true,"path":"2017/11/21/hello-world/","link":"","permalink":"http://asiamcn.github.io/2017/11/21/hello-world/","excerpt":"","text":"Welcome to Hexo! This is your very first post. Check documentation for more info. If you get any problems when using Hexo, you can find the answer in troubleshooting or you can ask me on GitHub. Quick StartCreate a new post1$ hexo new \"My New Post\" More info: Writing Run server1$ hexo server More info: Server Generate static files1$ hexo generate More info: Generating Deploy to remote sites1$ hexo deploy More info: Deployment","categories":[],"tags":[]}]}