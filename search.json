[{"title":"Android视频实现CenterCrop","url":"http://zeyio.com/2017/11/22/video-center-crop/","content":"<p><strong>CenterCrop的核心是使用TextureView的<a href=\"https://developer.android.com/reference/android/view/TextureView.html#setTransform(android.graphics.Matrix\" target=\"_blank\" rel=\"noopener\">setTransform</a>)方法来实现对视频区域的变换。</strong></p>\n<blockquote>\n<p> 思路来自于：<a href=\"https://github.com/yqritc/Android-ScalableVideoView\" target=\"_blank\" rel=\"noopener\">github</a></p>\n<p> 因为产品需求的原因，在展示视频的时候需要使用类似ImageView的CenterCrop属性。对指定区域进行填充，对视频等比放大。</p>\n</blockquote>\n<p>重写了TextureView，在其中使用MediaPlayer来播放视频。（上面库的ScalableVideoView 类里面）</p>\n<p>我的实现是在重写TextureView的View的onMeasure方法里面进行如下计算，来实现centerCrop:</p>\n<figure class=\"highlight java\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br><span class=\"line\">2</span><br><span class=\"line\">3</span><br><span class=\"line\">4</span><br><span class=\"line\">5</span><br><span class=\"line\">6</span><br><span class=\"line\">7</span><br><span class=\"line\">8</span><br><span class=\"line\">9</span><br><span class=\"line\">10</span><br><span class=\"line\">11</span><br><span class=\"line\">12</span><br></pre></td><td class=\"code\"><pre><span class=\"line\"><span class=\"keyword\">int</span> viewWidth = getDefaultSize(mVideoWidth, widthMeasureSpec);</span><br><span class=\"line\"><span class=\"keyword\">int</span> viewHeight = getDefaultSize(mVideoHeight, heightMeasureSpec);</span><br><span class=\"line\">setMeasuredDimension(viewWidth, viewHeight);</span><br><span class=\"line\"><span class=\"keyword\">float</span> scaleX = viewWidth * <span class=\"number\">1.0f</span> / mVideoWidth;</span><br><span class=\"line\"><span class=\"keyword\">float</span> scaleY = viewHeight * <span class=\"number\">1.0f</span> / mVideoHeight;</span><br><span class=\"line\"><span class=\"keyword\">float</span> maxScale = Math.max(scaleX, scaleY);</span><br><span class=\"line\"><span class=\"comment\">//中心位置</span></span><br><span class=\"line\"><span class=\"keyword\">int</span> pivotPointX = viewWidth / <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"keyword\">int</span> pivotPointY = viewHeight / <span class=\"number\">2</span>;</span><br><span class=\"line\"><span class=\"comment\">//初始效果是填满View，相当于fitXY. 这里从fitXY变成centerCrop..</span></span><br><span class=\"line\">mMatrix.setScale(maxScale / scaleX , maxScale / scaleY, pivotPointX, pivotPointY);</span><br><span class=\"line\">setTransform(mMatrix);</span><br></pre></td></tr></table></figure>\n","categories":[],"tags":["android"]},{"title":"Hello World","url":"http://zeyio.com/2017/11/21/hello-world/","content":"<p>Welcome to <a href=\"https://hexo.io/\" target=\"_blank\" rel=\"noopener\">Hexo</a>! This is your very first post. Check <a href=\"https://hexo.io/docs/\" target=\"_blank\" rel=\"noopener\">documentation</a> for more info. If you get any problems when using Hexo, you can find the answer in <a href=\"https://hexo.io/docs/troubleshooting.html\" target=\"_blank\" rel=\"noopener\">troubleshooting</a> or you can ask me on <a href=\"https://github.com/hexojs/hexo/issues\" target=\"_blank\" rel=\"noopener\">GitHub</a>.</p>\n<h2 id=\"Quick-Start\"><a href=\"#Quick-Start\" class=\"headerlink\" title=\"Quick Start\"></a>Quick Start</h2><h3 id=\"Create-a-new-post\"><a href=\"#Create-a-new-post\" class=\"headerlink\" title=\"Create a new post\"></a>Create a new post</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo new <span class=\"string\">\"My New Post\"</span></span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/writing.html\" target=\"_blank\" rel=\"noopener\">Writing</a></p>\n<h3 id=\"Run-server\"><a href=\"#Run-server\" class=\"headerlink\" title=\"Run server\"></a>Run server</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo server</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/server.html\" target=\"_blank\" rel=\"noopener\">Server</a></p>\n<h3 id=\"Generate-static-files\"><a href=\"#Generate-static-files\" class=\"headerlink\" title=\"Generate static files\"></a>Generate static files</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo generate</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/generating.html\" target=\"_blank\" rel=\"noopener\">Generating</a></p>\n<h3 id=\"Deploy-to-remote-sites\"><a href=\"#Deploy-to-remote-sites\" class=\"headerlink\" title=\"Deploy to remote sites\"></a>Deploy to remote sites</h3><figure class=\"highlight bash\"><table><tr><td class=\"gutter\"><pre><span class=\"line\">1</span><br></pre></td><td class=\"code\"><pre><span class=\"line\">$ hexo deploy</span><br></pre></td></tr></table></figure>\n<p>More info: <a href=\"https://hexo.io/docs/deployment.html\" target=\"_blank\" rel=\"noopener\">Deployment</a></p>\n","categories":[],"tags":[]},{"title":"about","url":"http://zeyio.com/about/index.html","content":"","categories":[],"tags":[]},{"title":"search","url":"http://zeyio.com/search/index.html","content":"","categories":[],"tags":[]},{"title":"","url":"http://zeyio.com/tags/index.html","content":"","categories":[],"tags":[]},{"title":"","url":"http://zeyio.com/categories/index.html","content":"","categories":[],"tags":[]}]